<script>
  const scriptURL = 'https://script.google.com/macros/s/your_script_id/exec'; // <-- replace with your Apps Script URL

  window.onload = function () {
    const registerForm = document.getElementById('registerForm');
    const loginForm = document.getElementById('loginForm');
    const registerMessage = document.getElementById('registerMessage');
    const loginMessage = document.getElementById('loginMessage');
    let savedUser = {};

    registerForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const username = document.getElementById('regUsername').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const password = document.getElementById('regPassword').value;
      const confirmPassword = document.getElementById('regConfirmPassword').value;

      if (password !== confirmPassword) {
        registerMessage.textContent = "Passwords do not match!";
        return;
      }

      fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify({ username, email, password }),
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(res => res.json())
      .then(() => {
        savedUser = { username, password };
        registerMessage.textContent = "Registered successfully! Redirecting to login...";
        setTimeout(() => {
          registerForm.style.display = 'none';
          loginForm.style.display = 'block';
          registerMessage.textContent = "";
        }, 2000);
      })
      .catch(err => {
        console.error('Error!', err.message);
        registerMessage.textContent = "Error saving to Google Sheets.";
      });
    });

    loginForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const loginUsername = document.getElementById('loginUsername').value.trim();
      const loginPassword = document.getElementById('loginPassword').value;
      const loginConfirmPassword = document.getElementById('loginConfirmPassword').value;

      if (loginPassword !== loginConfirmPassword) {
        loginMessage.textContent = "Passwords do not match!";
        return;
      }

      if (loginUsername === "timdeluna" && loginPassword === "123") {
        loginMessage.textContent = "Login successful! Redirecting...";
        setTimeout(() => {
          window.location.href = "account.html";
        }, 2000);
        return;
      }

      if (
        loginUsername === savedUser.username &&
        loginPassword === savedUser.password
      ) {
        loginMessage.textContent = "Login successful!";
      } else {
        loginMessage.textContent = "Invalid credentials!";
      }
    });
  };
</script>
